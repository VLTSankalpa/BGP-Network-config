hostname XR21
logging console notifications
domain lookup disable
line console
 exec-timeout 0 0
!
ipv4 access-list 10
 10 permit ipv4 21.21.1.0 0.0.0.255 any
 20 permit ipv4 21.21.3.0 0.0.0.255 any
 30 permit ipv4 21.21.5.0 0.0.0.255 any
 40 permit ipv4 21.21.7.0 0.0.0.255 any
!
ipv4 access-list 20
 10 permit ipv4 21.21.0.0 0.0.255.255 any
!
interface Loopback0
 ipv4 address 21.21.21.1 255.255.255.0
!
interface Loopback1
 ipv4 address 21.21.1.1 255.255.255.0
!
interface Loopback2
 ipv4 address 21.21.2.1 255.255.255.0
!
interface Loopback3
 ipv4 address 21.21.3.1 255.255.255.0
!
interface Loopback4
 ipv4 address 21.21.4.1 255.255.255.0
!
interface Loopback5
 ipv4 address 21.21.5.1 255.255.255.0
!
interface Loopback6
 ipv4 address 21.21.6.1 255.255.255.0
!
interface Loopback7
 ipv4 address 21.21.7.1 255.255.255.0
!
interface MgmtEth0/0/CPU0/0
 shutdown
!
interface GigabitEthernet0/0/0/0
 ipv4 address 10.10.21.21 255.255.255.0
 no shut
!
interface GigabitEthernet0/0/0/1
 ipv4 address 10.9.21.21 255.255.255.0
 no shut
!
route-policy NLRI_advertise
  pass
end-policy
!
router bgp 100
 bgp router-id 21.21.21.1
 bgp log neighbor changes detail
 address-family ipv4 unicast
  network 21.21.1.0/24
  network 21.21.2.0/24
  network 21.21.3.0/24
  network 21.21.4.0/24
  network 21.21.5.0/24
  network 21.21.6.0/24
  network 21.21.7.0/24
  network 21.21.21.0/24
 !
 af-group EBGP_NON_RR address-family ipv4 unicast
  send-community-ebgp
  next-hop-self
  route-policy NLRI_advertise in
  route-policy NLRI_advertise out
 !
 session-group EBGP
  remote-as 123
 !
 neighbor 10.9.21.9
  use session-group EBGP
  address-family ipv4 unicast
   use af-group EBGP_NON_RR
  !
 !
 neighbor 10.10.21.10
  use session-group EBGP
  address-family ipv4 unicast
   use af-group EBGP_NON_RR
  !
 !
!
end