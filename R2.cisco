en
conf t
hostname R2
!
no cdp log mismatch duplex
!
no ip domain lookup
!
interface GigabitEthernet0/0
 no shut
!
interface Loopback1
 ip address 2.2.2.1 255.255.255.255
 ip router isis 1
!
interface Loopback2
 ip address 2.2.2.2 255.255.255.255
!
interface Loopback3
 ip address 2.2.2.3 255.255.255.255
!
interface Loopback4
 ip address 2.2.2.4 255.255.255.255
!
interface Loopback5
 ip address 2.2.2.5 255.255.255.255
!
interface GigabitEthernet0/0.12
 encapsulation dot1Q 12
 ip address 10.1.2.2 255.255.255.0
 ip router isis 1
!
interface GigabitEthernet0/0.23
 encapsulation dot1Q 23
 ip address 10.2.3.2 255.255.255.0
 ip router isis 1
!
interface GigabitEthernet0/0.25
 encapsulation dot1Q 25
 ip address 10.2.5.2 255.255.255.0
 ip router isis 1
!
line con 0
 exec-timeout 0 0
!
router isis 1
 net 00.0000.0000.0002.00
 is-type level-2-only
 passive-interface Loopback1
!
router bgp 600
 template peer-policy IPV4_IBGP_RR_CLIENS
  route-reflector-client
  next-hop-self
 exit-peer-policy
 !
 template peer-session IBGP_PEERS
  remote-as 600
  update-source Loopback1
 exit-peer-session
 !
 bgp log-neighbor-changes
 neighbor 1.1.1.1 remote-as 500
 neighbor 1.1.1.1 ebgp-multihop 2
 neighbor 1.1.1.1 update-source Loopback1
 neighbor 3.3.3.1 inherit peer-session IBGP_PEERS
 neighbor 5.5.5.1 inherit peer-session IBGP_PEERS
 neighbor 6.6.6.1 inherit peer-session IBGP_PEERS
 !
 address-family ipv4
  network 2.2.2.2 mask 255.255.255.255
  network 2.2.2.3 mask 255.255.255.255
  network 2.2.2.4 mask 255.255.255.255
  network 2.2.2.5 mask 255.255.255.255
  neighbor 3.3.3.1 activate
  neighbor 3.3.3.1 inherit peer-policy IPV4_IBGP_RR_CLIENS
  neighbor 5.5.5.1 activate
  neighbor 5.5.5.1 inherit peer-policy IPV4_IBGP_RR_CLIENS
  neighbor 6.6.6.1 activate
  neighbor 6.6.6.1 inherit peer-policy IPV4_IBGP_RR_CLIENS
 exit-address-family
!
do wr
